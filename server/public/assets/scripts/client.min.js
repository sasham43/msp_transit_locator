/*! transit_play 2016-04-20 */
var app=angular.module("transitApp",["ngMap"]);app.controller("LocationController",["$http","NgMap",function(a,b){var c=this;c.responseList=[],c.markerList=[],c.routeNumber=0,c.mapsAPIKey="AIzaSyB4sLHNoVaZXg41IyAwcH0zdWrv0OgH9ZM",c.noBusses=!1,c.busIcon="assets/images/tiny_icon_bus.png",c.trainIcon="assets/images/tiny_train_icon.png",c.getVehicleLocations=function(){c.removeMarkers(),c.noBusses=!1,a.get("http://svc.metrotransit.org/NexTrip/VehicleLocations/"+c.routeNumber).then(function(a){c.tempObject={},c.tempMarker={},c.responseList=[],c.markerList=[],c.responseList=a.data,c.responseList.map(function(a){c.tempObject.lat=a.VehicleLatitude,c.tempObject.lng=a.VehicleLongitude,901==c.routeNumber||902==c.routeNumber||903==c.routeNumber?c.tempMarker=new google.maps.Marker({position:c.tempObject,icon:c.trainIcon}):c.tempMarker=new google.maps.Marker({position:c.tempObject,icon:c.busIcon}),c.markerList.push(c.tempMarker)}),0==c.markerList.length?c.noBusses=!0:c.noBusses=!1,console.log("markerlist",c.markerList),c.updateMap()})},c.updateMap=function(){b.getMap(0).then(function(a){c.markerList.map(function(b){b.setMap(a)})})},c.removeMarkers=function(){b.getMap(0).then(function(a){c.markerList.map(function(a){a.setMap(null)})})},c.updateMap()}]);